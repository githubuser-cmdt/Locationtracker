
<!DOCTYPE html>
<html>
<head>
  <title>Location Tracker</title>
  <meta charset="UTF-8">
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 50px; }
    #status { font-size: 18px; margin-top: 20px; }
  </style>
</head>
<body>

<h2>üìç Tracking Location...</h2>
<p id="status">Waiting for location...</p>

<script>
  // TODO: Replace with your Firebase config
  var firebaseConfig = {
  apiKey: "AIzaSyD4vi4rFqVHd4sPSY_LnNXt1d9ezmibTo",
  authDomain: "locationtrack-c3d83.firebaseapp.com",
  databaseURL: "https://locationtrack-c3d83-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "locationtrack-c3d83",
  storageBucket: "locationtrack-c3d83.appspot.com",
  messagingSenderId: "1066999358422",
  appId: "1:1066999358422:web:8c8a6b6e38192ab447377"
};
  firebase.initializeApp(firebaseConfig);
  var database = firebase.database();

  // Get ID from URL
  function getIdFromUrl() {
    var params = new URLSearchParams(window.location.search);
    return params.get('id') || "unknown";
  }

  function updateStatus(msg) {
    document.getElementById("status").textContent = msg;
  }

  function uploadLocation(lat, lng, id) {
    var ref = database.ref("locations/" + id);
    ref.set({ lat: lat, lng: lng }, function(error) {
      if (error) {
        updateStatus("‚ùå Error uploading location.");
      } else {
        updateStatus("‚úÖ Location uploaded successfully.");
      }
    });
  }

  // Ask for location
  if ("geolocation" in navigator) {
    updateStatus("üì° Getting your location...");
    navigator.geolocation.getCurrentPosition(function(position) {
      var lat = position.coords.latitude;
      var lng = position.coords.longitude;
      var id = getIdFromUrl();

      uploadLocation(lat, lng, id);
    }, function(error) {
      updateStatus("‚ùå Location permission denied or failed.");
    });
  } else {
    updateStatus("‚ùå Geolocation is not supported by your browser.");
  }
</script>

</body>
</html>
